(this["webpackJsonprs_pre-assignment"]=this["webpackJsonprs_pre-assignment"]||[]).push([[0],{129:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(36),i=n.n(r),o=(n(129),n(6)),c=n(17),u=n(55),s=n.n(u),l=n(71),d=n(62),p=n.n(d),f=n(37),v=n.n(f),b=n(77),g=Object(b.b)({name:"app",initialState:{cryptoPriceRangeData:[],resultStartEndDates:{startDate:{date:null,text:""},endDate:{date:null,text:""}},prevApiCallUrl:"",sma:50,startDate:null,endDate:null,is24HourInterval:!1,currentAnalysis:null},reducers:{setCryptoPriceRangeData:function(e,t){e.cryptoPriceRangeData=t.payload},setResultStartEndDates:function(e,t){e.resultStartEndDates=t.payload},setPrevApiCallUrl:function(e,t){e.prevApiCallUrl=t.payload},setStartDate:function(e,t){e.startDate=t.payload},setEndDate:function(e,t){e.endDate=t.payload},setSMA:function(e,t){e.sma=t.payload},setIs24HourInterval:function(e,t){e.is24HourInterval=t.payload},setCurrentAnalysis:function(e,t){e.currentAnalysis=t.payload}}}),D=g.actions,j=D.setCryptoPriceRangeData,h=D.setResultStartEndDates,m=D.setPrevApiCallUrl,O=D.setStartDate,T=D.setEndDate,y=(D.setSMA,D.setIs24HourInterval),C=D.setCurrentAnalysis,w=g.reducer,x=function(e){var t=e.getHours(),n=e.getUTCHours(),a=t-n;if(n>t){if(a<-12.1){var r=36e5*(24+a);return e.getTime()-r}return e.getTime()+36e5*(n-t)}if(n<t){if(a>14.1){var i=36e5*(24-a);return e.getTime()+i}return e.getTime()+36e5*(n-t)}return e.getTime()},S=function(e){return(e=new Date(e)).getUTCMonth()+1+"."+(e.getUTCDate()+1)+"."+e.getUTCFullYear()+"   "+(e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours())+":"+(e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes())+"  UTC"},U=function(e){return null===e||void 0===e?void 0:e.filter((function(t,n){var a,r=new Date(null===t||void 0===t?void 0:t[0]);return new Date(null===e||void 0===e||null===(a=e[n-1])||void 0===a?void 0:a[0]).getUTCDate()!==r.getUTCDate()}))},Y=function(e){for(var t=!1,n=!1,a=0,r=0;r<(null===e||void 0===e?void 0:e.length);r++){var i=e[r];if(0!==r){var o=new Date(i[0]),c=new Date(e[r-1][0]);if(o.getUTCDate()!==c.getUTCDate()){if(t){n=!0;break}t=!0}!0===t&&!1===n&&a++}}return a<20},M=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.app.prevApiCallUrl})),n=Object(c.c)((function(e){return e.app.cryptoPriceRangeData})),a=Object(c.c)((function(e){return e.app.startDate})),r=Object(c.c)((function(e){return e.app.endDate})),i=JSON.parse(a),o=JSON.parse(r),u=function(){var a=Object(l.a)(s.a.mark((function a(){var r,c,u,l,d,f;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=new Date(v()(i).format("YYYY-MM-DD")+"T00:00:00"),c=new Date(v()(o).format("YYYY-MM-DD")+"T00:00:00"),u=x(r)-36e5,l=x(c)+36e5,(d="https://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range?vs_currency=eur&from=".concat(u/1e3,"&to=").concat(l/1e3))!==t){a.next=9;break}return a.abrupt("return",{data:n});case 9:return a.next=11,p.a.get(d);case 11:return f=a.sent,e(y(Y(f.data.prices))),e(j(f.data)),e(m(d)),a.abrupt("return",{data:f.data});case 16:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return[u]},k=n(221),H=n(1),A=function(e,t,n,a){return 60*t.getUTCHours()+t.getUTCMinutes()<60*(23-e.getUTCHours())+(60-e.getUTCMinutes())?n[a]:n[a-1]},P=function(e,t,n,a){return e[1]>=(null===t||void 0===t?void 0:t[1])&&t?n={trend:0,startDate:e[0]}:e[1]<(null===t||void 0===t?void 0:t[1])&&t&&(n.trend++,n.endDate=e[0],a.trend<n.trend&&(console.log(n),a=n)),{curBearTrend:n,curLongestBearTrend:a}},R=function(e){var t=e.setResult,n=Object(c.c)((function(e){return e.app.is24HourInterval})),a=Object(c.c)((function(e){return e.app.currentAnalysis})),r=Object(c.b)(),i=M(),u=Object(o.a)(i,1)[0];return Object(H.jsx)(k.a,{selected:1===a,value:"bearTrend",onClick:function(){var e={trend:0,startDate:null,endDate:null};r(C(1)),u().then((function(t){console.log(t);var a=t.data.prices;console.log("is 24h interval   ",t.data);var r={trend:0},i=null,o=null,c=!1;console.log(a);for(var u=0;u<(null===a||void 0===a?void 0:a.length);u++){var s=a[u],l=new Date(s[0]),d=0===u?null:new Date(a[u-1][0]);if(void 0===a[u+1]&&l.getUTCHours()>22)o=s,c=!0;else if(!1===n){if(0===u)continue;l.getUTCDate()!==d.getUTCDate()&&(o=A(d,l,a,u),c=!0)}else!0===n&&(o=s,c=!0);if(o&&!r.startDate&&(r.startDate=o[0]),!0===c){var p=P(o,i,r,e),f=p.curLongestBearTrend;r=p.curBearTrend,e=f,i=o,c=!1}}})).then((function(){console.log(e),r(h({startDate:{date:e.startDate,text:"Longest bear trend start"},endDate:{date:e.endDate,text:"Longest bear trend end"}})),t("Longest bear trend in given date range is "+e.trend+" days")}))},children:"Longest Bear trend"})},B=n(75),E=n(14),J=n(28),N=n(107);J.c.register.apply(J.c,Object(E.a)(J.j));var I=function(e){var t,n,r,i,u,d;Object(B.a)(e);var f=Object(c.c)((function(e){return e.app.startDate})),v=Object(c.c)((function(e){return e.app.endDate})),b=new Date(JSON.parse(f)),g=new Date(JSON.parse(v)),D=Object(c.c)((function(e){return e.app.resultStartEndDates})),j=Object(c.c)((function(e){return e.app.cryptoPriceRangeData})),h=Object(c.c)((function(e){return e.app.prevApiCallUrl})),m=Object(c.c)((function(e){return e.app.is24HourInterval})),O=Object(a.useState)(null),T=Object(o.a)(O,2),y=T[0],C=T[1],w=null===j||void 0===j||null===(t=j.prices)||void 0===t?void 0:t.map((function(e){return new Date(e[0]).getMonth()+1+"/"+(new Date(e[0]).getDate()+1)+"/"+new Date(e[0]).getFullYear()})),x=Object(a.useState)(null),S=Object(o.a)(x,2),Y=S[0],M=S[1],k=Object(a.useState)(null),A=Object(o.a)(k,2),P=A[0],R=A[1];Object(a.useEffect)(Object(l.a)(s.a.mark((function e(){var t,n,a,r,i,o,c,u,l,d,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i="https://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range?vs_currency=eur&from=".concat(b.getTime()/1e3-1728e3,"&to=").concat(b.getTime()/1e3),o="https://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range?vs_currency=eur&from=".concat(g.getTime()/1e3,"&to=").concat(g.getTime()/1e3+1728e3),e.next=5,p.a.get(i);case 5:return c=e.sent,e.next=8,p.a.get(o);case 8:u=e.sent,l=[null===j||void 0===j||null===(t=j.prices)||void 0===t?void 0:t.slice()],d=c.data.prices,f=u.data.prices,m&&(d=U(d),f=U(f)),M(d.length-1),R(d.length+l.length-2),null===(n=l)||void 0===n||n.unshift(d),null===(a=l)||void 0===a||a.push(f),l=l.flat(),null===(r=l)||void 0===r||r.findIndex((function(e){var t,n;if((null===e||void 0===e?void 0:e[0])===(null===j||void 0===j||null===(t=j.prices)||void 0===t||null===(n=t[0])||void 0===n?void 0:n[0]))return!0})),C(l.map((function(e){return e[1]}))),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])}))),[h]);var E={labels:w,datasets:[{type:"line",label:"price \u20ac",borderColor:"blue",backgroundColor:"blue",borderWidth:2,data:null===j||void 0===j||null===(n=j.prices)||void 0===n?void 0:n.map((function(e){return e[1]})),pointRadius:0},{type:"line",label:"sma (20)",borderColor:"black",backgroundColor:"black",borderWidth:2,data:null===j||void 0===j||null===(r=j.prices)||void 0===r?void 0:r.map((function(e,t){try{return y[Y+t-P]&&y[Y+t+P]&&y&&(null===y||void 0===y?void 0:y.slice(t,Y+t+P)).reduce((function(e,t){return e+t}))/(2*P)||null}catch(n){return null}})),pointRadius:0},{type:"line",label:D.startDate.text,borderColor:"red",backgroundColor:"red",borderWidth:1,data:null===j||void 0===j||null===(i=j.prices)||void 0===i?void 0:i.map((function(e,t){if(D.startDate.date===e[0])return e[1]})),pointRadius:10,fill:!0},{type:"line",label:null===D||void 0===D||null===(u=D.endDate)||void 0===u?void 0:u.text,borderColor:"red",backgroundColor:"red",borderWidth:1,data:null===j||void 0===j||null===(d=j.prices)||void 0===d?void 0:d.map((function(e,t){var n;if((null===D||void 0===D||null===(n=D.endDate)||void 0===n?void 0:n.date)===e[0])return e[1]})),pointRadius:10}],options:{responsive:!0}};return Object(H.jsx)(N.a,{type:"bar",data:E})},L=n(30),_=n(217),V=n(216),W=n(206),F=n(215),q=function(e){Object(B.a)(e);var t=Object(c.c)((function(e){return e.app.startDate})),n=Object(c.c)((function(e){return e.app.endDate})),a=JSON.parse(t),r=JSON.parse(n),i=Object(c.b)();return Object(H.jsx)("div",{className:"",children:Object(H.jsxs)(W.b,{dateAdapter:V.a,children:[Object(H.jsx)(F.a,{label:"Start Date",value:a,onChange:function(e){i(O(JSON.stringify(e)))},renderInput:function(e){return Object(H.jsx)(_.a,Object(L.a)({},e))}}),Object(H.jsx)(F.a,{label:"End Date",value:r,onChange:function(e){i(T(JSON.stringify(e)))},renderInput:function(e){return Object(H.jsx)(_.a,Object(L.a)({},e))}})]})})},z=function(e){var t=e.setResult,n=(e.setData,Object(c.c)((function(e){return e.app.currentAnalysis}))),a=Object(c.c)((function(e){return e.app.startDate})),r=Object(c.c)((function(e){return e.app.endDate})),i=JSON.parse(a),u=JSON.parse(r),s=Object(c.b)(),l=M(),d=Object(o.a)(l,1)[0];return Object(H.jsx)(k.a,{selected:2===n,value:"HighestTradingVol",onClick:function(){s(C(2));var e=new Date(v()(i).format("YYYY-MM-DD")+"T00:00:00"),n=new Date(v()(u).format("YYYY-MM-DD")+"T00:00:00"),a=x(e)-36e5,r=x(n)+36e5;d(a,r).then((function(e){var n=function(e){var t=0,n=null;return null===e||void 0===e||e.forEach((function(e){e[1]>t&&(t=e[1],n=e[0])})),{highestVolume:t,highestVolumeDate:n}}(e.data.total_volumes),a=n.highestVolume,r=n.highestVolumeDate,i=new Date(r);s(h({startDate:{date:i.getTime(),text:"Highest volume"}})),t("Highest 24h volume in given date range is "+a+"\u20ac at date: "+S(i.getTime()))}))},children:"Highest trading volume"})},G=function(e){var t=e.setResult,n=(e.setData,Object(c.c)((function(e){return e.app.startDate}))),a=Object(c.c)((function(e){return e.app.endDate})),r=JSON.parse(n),i=JSON.parse(a),u=Object(c.c)((function(e){return e.app.currentAnalysis})),s=Object(c.b)(),l=M(),d=Object(o.a)(l,1)[0];return Object(H.jsx)(k.a,{selected:3===u,value:"TimeMachineProfit",onClick:function(){s(C(3));var e=new Date(v()(r).format("YYYY-MM-DD")+"T00:00:00"),n=new Date(v()(i).format("YYYY-MM-DD")+"T00:00:00"),a=x(e)-36e5,o=x(n)+36e5;d(a,o).then((function(e){var n=e.data.prices;if(!0!==function(e){var t=!1;return null===e||void 0===e||e.forEach((function(e,n,a){0!==n&&e[1]>a[n-1][1]&&(t=!0)})),!t}(n)){var a=function(e){var t,n=1e18;return e.forEach((function(e,a,r){e[1]<n&&(n=e[1],t=e[0])})),{lowestPrice:n,lowestPriceDate:t}}(n),r=a.lowestPrice,i=a.lowestPriceDate,o=function(e){var t,n=0;return e.forEach((function(e,a,r){e[1]>n&&(n=e[1],t=e[0])})),{highestPrice:n,highestPriceDate:t}}(n),c=o.highestPrice,u=o.highestPriceDate,l=new Date(u),d=new Date(i);if(u>i)s(h({startDate:{date:d.getTime(),text:"Best time to buy"},endDate:{date:l.getTime(),text:"Best time to sell"}})),t("best time to buy: "+S(d.getTime())+" best time to sell: "+S(l.getTime()));else{var p=function(e,t){var n,a=1e20;return e.forEach((function(e){e[0]>=t||a>e[1]&&(a=e[1],n=e[0])})),{lowestBeforeHighest:a,lowestBeforeHighestDate:n}}(n,u),f=p.lowestBeforeHighest,v=p.lowestBeforeHighestDate,b=function(e,t){var n,a=0;return Object(E.a)(e).reverse().forEach((function(e){e[0]<=t||a<e[1]&&(a=e[1],n=e[0])})),{highestAfterLowest:a,highestAfterLowestDate:n}}(n,i),g=b.highestAfterLowest,D=b.highestAfterLowestDate,j=c-f,m=g-r,O=new Date(v),T=new Date(D);j>m?(s(h({startDate:{date:O.getTime(),text:"Best time to buy"},endDate:{date:l.getTime(),text:"Best time to sell"}})),t("best time to buy: "+S(O.getTime())+" best time to sell: "+S(l.getTime()))):m>j?(s(h({startDate:{date:d.getTime(),text:"Best time to buy"},endDate:{date:T.getTime(),text:"Best time to sell"}})),t("best time to buy: "+S(d.getTime())+" best time to sell: "+S(T.getTime()))):t("no result found for best time to sell and buy")}}else t("it is not possible to buy & sell for profit in given date range")}))},children:"Time machine max profit"})},K=Object(b.a)({reducer:{app:w}});n(158);var Q=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],i=(K.getState().app.cryptoPriceRangeData,Object(a.useState)("TimeMachineProfit")),u=Object(o.a)(i,2);return u[0],u[1],Object(H.jsxs)("div",{className:"App",children:[Object(H.jsxs)(c.a,{store:K,children:[Object(H.jsx)(q,{}),Object(H.jsx)(R,{setResult:r}),Object(H.jsx)(z,{setResult:r}),Object(H.jsx)(G,{setResult:r}),Object(H.jsx)(I,{})]}),Object(H.jsx)("p",{children:n})]})};i.a.render(Object(H.jsx)(Q,{}),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.41f835a8.chunk.js.map